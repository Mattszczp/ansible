- name: Install some prerequisites
  become: yes
  apt:
    name: [apt-transport-https, curl]
    state: present

- name: Install System Packages 1 (build-essential, cmake, pkg-config, pthread)
  become: true
  apt:
    name: ["build-essential", "cmake", "pkg-config", "libpthread-stubs0-dev"]
  tags:
    - install
    - neovim
    - core

- name: Install System Packages 2 (lua, unzip, libtool, libtool-bin, gettext)
  become: true
  apt:
    name: ["lua5.1", "unzip", "libtool", "libtool-bin", "gettext"]
  tags:
    - install
    - neovim
    - core

- name: Install Clang
  become: true
  apt:
    name:
      [
        "clang",
        "clang-11",
        "clang-12",
        "clangd",
        "clangd-10",
        "clangd-11",
        "clangd-12",
      ]
  tags:
    - install
    - neovim
    - core

- name: Install essential programs
  become: yes
  apt:
    name:
      [
        zsh,
        tmux,
        flatpak,
        git,
        pip,
        i3,
        fzf,
        golang,
        python3-pip,
        dconf-editor,
        moreutils,
        x11-xserver-utils,
      ]
  tags:
    - essentials
    - software

- name: Add the flathub flatpak repository remote to the user installation
  community.general.flatpak_remote:
    name: flathub
    state: present
    flatpakrepo_url: https://dl.flathub.org/repo/flathub.flatpakrepo
  tags:
    - essentials
    - software

- name: Install eseential flatpaks
  community.general.flatpak:
    name:
      [
        com.obsproject.Studio,
        com.discordapp.Discord,
        org.keepassxc.KeePassXC,
        org.gimp.GIMP,
        com.slack.Slack,
        org.videolan.VLC,
      ]
    state: present
  tags:
    - essentials
    - software
